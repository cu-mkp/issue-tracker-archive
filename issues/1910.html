<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/issue-tracker-archive/assets/style.css">
    <title>#1910: entry-metadata not encoding character entities</title>
</head>
<body>
    <h1>#1910: entry-metadata not encoding character entities</h1>
    <h2>opened by njr2128</h2>
    <div><p>&amp; (and maybe others?) showing up as character entity and not as literal character</p>
<p>For example, the heading of 4v<em>1: https://github.com/cu-mkp/m-k-manuscript-data/blob/4625a7ad236f37bca47f4bdc27fcd536e89bcbb0/ms-xml/tl/tl</em>p004v_preTEI.xml#L8-L9 is returned as</p>
<blockquote>
<p>Black varnish for sword guard, bands for trunks, <code>&amp;amp;</code>c</p>
</blockquote>
<p>It should be</p>
<blockquote>
<p>Black varnish for sword guard, bands for trunks, &amp;c</p>
</blockquote></div>
    <br>
            <h2>gschare commented:</h2>
        <div><p>Holding off this fix until next release of <code>manuscript-object</code>.</p></div>
        <br>
            <h2>tcatapano commented:</h2>
        <div><p>other character entities appearing in entry-metadata.csv are:</p>
<p><code>#224 #230 #231 #232 #233 #234 #8211 #8217 #8230 #9728 #9790</code></p></div>
        <br>
            <h2>tcatapano commented:</h2>
        <div><p>Note these appear in xml files under allFolios, not under ms-xml</p></div>
        <br>
            <h2>gschare commented:</h2>
        <div><p>This is being handled as part of the work on <a href="https://github.com/cu-mkp/manuscript-object/issues/41">the manuscript-object refactor</a>.</p>
<p>It looks like the inconsistencies are caused because - allFolios/ is generated by update.py, distinctly from how other derivatives are generated - entries/ is generated by recipe.py, which makes sure to decode character entities - entry-metadata.csv is generated by one specific method in recipe.py, find_title(), which still uses regex (so it doesn't decode character entities)</p></div>
        <br>
    </body>
</html>
